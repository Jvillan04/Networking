en
conf t
hostname CorpB
enable secret cisco
service password-encryption


! Inteface configuration
interface Lo0
ip address 172.28.99.100 255.255.255.255
ip ospf message-digest-key 1 md5 cisco
no shutdown

interface F0/0
ip address 172.28.30.1 255.255.255.0
ip ospf message-digest-key 1 md5 cisco
no shutdown

interface F0/1
ip address 192.168.30.1 255.255.255.0
ip ospf message-digest-key 1 md5 cisco
no shutdown

interface S0/0/0
ip address 172.28.31.33 255.255.255.252
ip ospf message-digest-key 1 md5 cisco
clock rate 2000000
no shutdown

! No MD5 authentication on S0/1/0 (This interface is connected to ISP router)
interface S0/0/1
ip address 180.1.2.146 255.255.255.240
no shutdown

interface S0/1/0
ip address 172.28.31.42 255.255.255.252
ip ospf message-digest-key 1 md5 cisco
clock rate 2000000
no shutdown

! Default Static Route to ISP Router (S0/0/1 adddress on ISP router) (#5)
ip route 0.0.0.0 0.0.0.0 180.1.2.145

! OSPF Configuration (Dynamic Routing #6)
router ospf 1
! Set Loopback Address as Static router-ID <Loopback IP>
router-id 172.28.99.100
! Advertise a default route into OSPF
default-information originate
! Advertise the following networks into OSPF area 0 <NetAddr> <Wildcard Mask>
network 172.28.30.0 0.0.0.255 area 0
network 192.168.30.0 0.0.0.255 area 0
network 172.28.31.32 0.0.0.3 area 0
network 172.28.31.40 0.0.0.3 area 0
! Apply OSPF Authentication to OSPF area 0
area 0 authentication message-digest
!
exit

! (#12) Port Address Translation (PAT) should be configured to use a pool of 10 addresses on the CorpB router:
! Public Network Address:180.1.2.144 /28   Usable Host Range: 180.1.2.145 - 180.1.2.158 (Broadcast Address: 180.1.2.159)
!Configure NAT and PAT pool of 10 addresses starting from 180.1.2.148 to 180.1.2.157 (inclusive)
ip nat pool CORPB-POOL 180.1.2.148 180.1.2.157 netmask 255.255.255.240
! Make a standard ACL and name it CORPB-NAT-ACL
ip access-list standard CORPB-NAT-ACL
! Add a description
remark this is used for outbound PAT (Address Translation)
! Define the private networks that will be translated: permit <NetAddr> <Wildcard Mask> (All RFC1918 addresses within the CorpB LAN)
permit 172.28.30.0 0.0.0.255
permit 192.168.30.0 0.0.0.255
permit 172.28.31.32 0.0.0.3
permit 172.28.31.36 0.0.0.3
permit 172.28.31.40 0.0.0.3
! Deny everything else 
deny any
! Apply NAT using the defined pool and enable PAT (overload)
ip nat inside source list CORPB-NAT-ACL pool CORPB-POOL overload
! PAT is used to allow multiple private ip addresses to be translated to a single public ip address
! Apply the NAT configuration to the inside interfaces connected to the private network (Addresses that will be NATed)
interface S0/0/0
ip nat inside
interface S0/1/0
ip nat inside
interface F0/0
ip nat inside
interface F0/1
ip nat inside
! Apply the NAT configuration to the outside interface connected to public network
interface S0/0/1
ip nat outside


! (#13) HTTP Server Static NAT Configuration


! (#14) FTP Server Static NAT Configuration